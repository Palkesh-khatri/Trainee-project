<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/jquery.validate.min.js"></script>

    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

    <!-- <script src="E:\synsoft\sign_up\bootstrap form\material_form.css"></script> -->
    <style>
        #display_image {
            width: 200px;
            height: 125px;
            border: 1px solid black;
            background-position: center;
            background-size: cover;
        }
    </style>

</head>

<body class="bg-image" style="background-image: url('music7.png'); background-size: cover;">
    <div class="container">


        <form class=" well form-horizontal" action="" method="HTTP_METHOD" id="contact_form"
            enctype="multipart/form-data">
            <fieldset>

                <!-- Form Name -->
                <div class="row">
                    <div class="col-md-10">
                        <legend>
                            <center>
                                <h2><b>Music Subscription</b></h2>
                            </center>
                        </legend>
                    </div>
                    <div class="col-md-2">
                        <input type="file" name="userPicture" id="image_input" />
                        <div class="rounded-circle" id="display_image"></div>
                    </div>
                </div>


                <!-- Text input-->

                <div class="form-group">
                    <label class="col-md-4 control-label">First Name</label>
                    <div class="col-md-4 inputGroupContainer">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                            <input name="first_name" placeholder="First Name" class="form-control" type="text">
                        </div>
                    </div>
                </div>

                <!-- Text input-->

                <div class="form-group">
                    <label class="col-md-4 control-label">Last Name</label>
                    <div class="col-md-4 inputGroupContainer">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                            <input name="last_name" placeholder="Last Name" class="form-control" type="text">
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-md-4 control-label">Username</label>
                    <div class="col-md-4 inputGroupContainer">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                            <input name="user_name" placeholder="Username" class="form-control" type="text">
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-md-4 control-label">Mobile No.</label>
                    <div class="col-md-4 inputGroupContainer">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                            <input name="confirm_password" placeholder="Mobile No." class="form-control"
                                type="password">
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-md-4 control-label">E-Mail</label>
                    <div class="col-md-4 inputGroupContainer">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-envelope"></i></span>
                            <input name="email" placeholder="E-Mail Address" class="form-control" type="text">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-4 control-label"></label>
                    <div class="col-md-4"><br>
                        &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<button id="submit"
                            type="submit" class="btn btn-warning">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspSUBMIT <span
                                class="glyphicon glyphicon-send"></span>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp</button>
                    </div>
                </div>
            </fieldset>
        </form>
    </div>

</body>
<script>
    // const image_input = document.querySelector("#image_input");
    // var uploaded_image;

    // image_input.addEventListener('change', function () {
    //     const reader = new FileReader();
    //     reader.addEventListener('load', () => {
    //         uploaded_image = reader.result;
    //         document.querySelector("#display_image").style.backgroundImage = `url(${uploaded_image})`;
    //     });
    //     reader.readAsDataURL(this.files[0]);
    // });

    const form = document.querySelector("form");
    form.addEventListener("submit", (e) => {
        e.preventDefault();
        const data = new FormData(form);
        data.append('name', 'Image Upload');
        console.log("file")
        axios
            .post("http://192.168.0.67/NetCoreAPI/api/home/upload_profile", data, {
                headers: {
                    Authorization: 'Bearer ' + "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI3MzljOTJmYS0zNWJiLTRkMDMtYjUxMi0yMGU4NzIzMzI1N2EiLCJ1c2VyIjoie1widXNlcklEXCI6MzEsXCJuYW1lXCI6XCJwYWxrZXNoXCJ9IiwibmJmIjoxNjQ4MTkxMjg1LCJleHAiOjE2NDgyNzc2ODUsImlhdCI6MTY0ODE5MTI4NX0.n04N4HRdMdoMyoiJidPrftwZKazNtems443iM7XYGCo"
                },
            })
        console.log("data", data.data.url)
            .then((res) => {
                console.log(res);
            })
            .catch((err) => {
                console.log(err);
            });
    });

</script>

</html>